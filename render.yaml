services:
  - type: web
    name: ai-resume-analyzer
    runtime: python
    region: oregon
    plan: starter         # 512 MB RAM, shared CPU â€” sufficient for 100-300 users
    buildCommand: |
      pip install -r requirements.txt
      python -c "import nltk; nltk.download('stopwords', download_dir='./nltk_data'); nltk.download('wordnet', download_dir='./nltk_data'); nltk.download('omw-1.4', download_dir='./nltk_data'); nltk.download('punkt', download_dir='./nltk_data'); nltk.download('punkt_tab', download_dir='./nltk_data')"
    startCommand: gunicorn wsgi:app --workers 2 --threads 2 --timeout 20 --bind 0.0.0.0:$PORT --access-logfile - --error-logfile -
    envVars:
      - key: SECRET_KEY
        generateValue: true
      - key: NLTK_DATA
        value: ./nltk_data
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: RENDER
        value: "true"
    healthCheckPath: /health
    autoDeploy: true
